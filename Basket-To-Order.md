# Оформление заказа из корзины

**Акторы:** Пользователь, Система

**Цель:** оформить заказ из корзины (включая выбор адреса доставки и прием оплаты при необходимости), чтобы его доставили домой

## Основной сценарий

1. Пользователь нажимает в корзине кнопку “Оформить заказ”

2. Система проверяет, что корзина не пустая, и запрашивает подтверждение у Пользователя

3. Пользователь подтверждает, что действительно готов оформить заказа

4. Система удостоверяется, что Пользователь авторизован, адрес доставки указан.

5. Система просит подтвердить Пользователя адрес доставки, указать желаемое время и другие комментарии к доставке.

6. Пользователь подтверждает адрес доставки и указывает желаемое время доставки. 

7. Система предлагает Пользователю выбрать способ оплаты - картой на сайте или курьеру наличными

8. Пользователь выбирает вариант 'курьеру наличными”

9. Система просит окончательно проверить состав заказа, адрес и время доставки, данные об оплате.

10. Пользователь подтверждает данные.

11. Система оповещает Пользователя, что заказ сформирован.

## Альтернативные сценарии

### Альтернативный сценарий 1

7. Пользователь добавляет комментарий по желанию
8. Возврат в ***пп. 7 основного сценария***

### Альтернативный сценарий 2

5. Если пользователь неавторизован, то переходим в сценарий авторизации
6. После завершения сценария авторизации (успех) возврат в ***пп.5 основного сценария***

### Альтернативный сценарий 3

8. Пользователь выбрал способ оплаты “картой на сайте”.
9. Переходим в сценарий оплаты на сайте
10. После завершения сценария оплаты на сайте (успех)  возврат в ***пп.9 основного сценария***

### Альтернативный сценарий 4

6. Адрес доставки находится вне зоны возможной доставки
7. Пользователь меняет адрес доставки
8. Возврат в ***пп.6 основного сценария***

## Исключения

### Исключение 1

**В любом месте основного сценария**

- Пользователь отказался оформлять заказа
- ***Выход из сценария***

### Исключение 2 (к АС 4)

7. Пользователь отказался менять адрес
8. ***Выход из сценария***

### Исключение 3 (к АС 3)

10. В случае неуспеха переход к ***пп.7 основного сценария*** 

### Исключение 4

**В любом месте основного сценария**
 
 - Пользователь прекратил взаимодействие с Системой, не завершив оформление заказа
 - ***Выход из сценария***
 
### Исключение 5 (к АС 2)

6. В случае неуспеха переход к ***пп.4 основного сценария***


